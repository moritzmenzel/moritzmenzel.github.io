!function(){function t(t,n,e){i(n);var o=t.style,r={};for(var a in n)e&&(r[a]=o[a]||""),o[a]=n[a];return r}function n(){var t={},n=["webkitTransition","transition","mozTransition"],i=["webkitTransform","transform","mozTransform"],e={transition:"transitionend",mozTransition:"transitionend",webkitTransition:"webkitTransitionEnd"};return n.some(function(n){return void 0!==f.style[n]?(t.transition=n,t.transEnd=e[n],!0):void 0}),i.some(function(n){return void 0!==f.style[n]?(t.transform=n,!0):void 0}),t}function i(t){var n;t.transition&&(n=t.transition,delete t.transition,t[g]=n),t.transform&&(n=t.transform,delete t.transform,t[y]=n)}function e(n,i){for(var e,o=getComputedStyle(n),r=document.createElement("div"),a=b.length;a--;)e=b[a],r.style[e]=o[e];return t(r,{visibility:"hidden",width:i.width+"px",height:i.height+"px",display:"inline"===o.display?"inline-block":o.display}),h.deepCopy?r.innerHTML=n.innerHTML:r.textContent=n.textContent,r}var o,r,a,s,l="WebkitAppearance"in document.documentElement.style?"-webkit-":"",d=/^([\d\.]+)%$/,f=document.createElement("div"),c=document.createElement("div"),p=!1,u=!1,h={transitionDuration:".4s",transitionTimingFunction:"cubic-bezier(.4,0,0,1)",bgColor:"#fff",bgOpacity:1,maxWidth:300,maxHeight:300,onOpen:null,onClose:null,onBeforeClose:null,onBeforeOpen:null},m=n(),g=m.transition,y=m.transform,v=y.replace(/(.*)Transform/,"-$1-transform"),w=m.transEnd;t(f,{position:"fixed",display:"none",zIndex:99998,top:0,left:0,right:0,bottom:0,opacity:0,backgroundColor:h.bgColor,cursor:l+"zoom-out",transition:"opacity "+h.transitionDuration+" "+h.transitionTimingFunction}),t(c,{position:"fixed",zIndex:99999,top:"50%",left:"50%",width:0,height:0});var b=["position","display","float","top","left","right","bottom","marginBottom","marginLeft","marginRight","marginTop","font","lineHeight","verticalAlign"],x={config:function(n){if(!n)return h;for(var i in n)h[i]=n[i];return t(f,{backgroundColor:h.bgColor,transition:"opacity "+h.transitionDuration+" "+h.transitionTimingFunction}),this},open:function(n,i){if(!p&&!u){o="string"==typeof n?document.querySelector(n):n,h.onBeforeOpen&&h.onBeforeOpen(o),p=!0,u=!0,r=o.parentNode;var m=o.getBoundingClientRect(),g=Math.min(h.maxWidth/m.width,h.maxHeight/m.height),y=m.left-(window.innerWidth-m.width)/2,b=m.top-(window.innerHeight-m.height)/2;a=e(o,m),s=t(o,{position:"absolute",top:0,left:0,right:"",bottom:"",whiteSpace:"nowrap",marginTop:-m.height/2+"px",marginLeft:-m.width/2+"px",cursor:l+"zoom-out",transform:"translate("+y+"px, "+b+"px)",transition:""},!0);var x=o.style.width.match(d),C=o.style.height.match(d);if(x||C){var T=x?+x[1]/100:1,E=C?+C[1]/100:1;t(c,{width:~~(m.width/T)+"px",height:~~(m.height/E)+"px"})}r.appendChild(f),r.appendChild(c),r.insertBefore(a,o),c.appendChild(o),f.style.display="block";o.offsetHeight;return f.style.opacity=h.bgOpacity,t(o,{transition:v+" "+h.transitionDuration+" "+h.transitionTimingFunction,transform:"scale("+g+")"}),o.addEventListener(w,function k(){o.removeEventListener(w,k),u=!1,i=i||h.onOpen,i&&i(o)}),this}},close:function(n){if(p&&!u){u=!0,h.onBeforeClose&&h.onBeforeClose(o);var i=a.getBoundingClientRect(),e=i.left-(window.innerWidth-i.width)/2,l=i.top-(window.innerHeight-i.height)/2;return f.style.opacity=0,t(o,{transform:"translate("+e+"px, "+l+"px)"}),o.addEventListener(w,function d(){o.removeEventListener(w,d),t(o,s),r.insertBefore(o,a),r.removeChild(a),r.removeChild(f),r.removeChild(c),f.style.display="none",a=null,p=!1,u=!1,n="function"==typeof n?n:h.onClose,n&&n(o)}),this}},listen:function C(n){if("string"!=typeof n)return t(n,{cursor:l+"zoom-in"}),n.addEventListener("click",function(t){t.stopPropagation(),p?x.close():x.open(n)}),this;for(var i=document.querySelectorAll(n),e=i.length;e--;)C(i[e])}};f.addEventListener("click",x.close),c.addEventListener("click",x.close),"object"==typeof exports?module.exports=x:"function"==typeof define&&define.amd?define(function(){return x}):this.Zoomerang=x}();